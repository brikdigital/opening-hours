{"version":3,"file":"app-563b3b2c.js","sources":["../../../../../buildchain/src/js/main.ts"],"sourcesContent":["import '@/css/app.css';\n\nif (Craft.OpeningHours == null) Craft.OpeningHours = {} as typeof Craft.OpeningHours;\n\nCraft.OpeningHours.Input = Garnish.Base.extend({\n  container: null,\n  namespacedId: null,\n  settings: null,\n  currentRowsAmount: null,\n  addPeriodButton: null,\n\n  init(namespacedId, id, settings) {\n    this.container = $('.opening-hours-periods').first();\n    this.namespacedId = namespacedId;\n    this.settings = JSON.parse(settings);\n\n    this.currentRowsAmount = this.settings.periods.length;\n\n    this.addPeriodButton = $(`#${namespacedId}-addNewPeriodButton`).first();\n    this.addPeriodButton.on('click', (e) => {\n      e.preventDefault();\n      this.addRow();\n    });\n\n    this.container.delegate( \".removePeriodButton\", \"click\", (e) => {\n      e.preventDefault();\n      this.deleteRow(e);\n    });\n\n    // this.removePeriodButtons = $(`.removePeriodButton`);\n    // this.removePeriodButtons.on('click', (e) => {\n    //   e.preventDefault();\n    //   this.deleteRow(e);\n    // });\n  },\n\n  addRow() {\n    this.currentRowsAmount++;\n\n    const html = this.getNewRowHTML();\n    const period = $(html).appendTo(this.container);\n\n    this.trigger('blockAdded', {\n      $block: period,\n    });\n\n    Craft.initUiElements(period);\n\n    $('.datewrapper > input', period).datepicker(Craft.datepickerOptions);\n    $('.timewrapper > input', period).timepicker(Craft.timepickerOptions);\n\n    this.updateAddPeriodButton();\n  },\n\n  deleteRow(e) {\n    $(e.target).closest(\".opening-hours-field-period\").remove();\n  },\n\n  getNewRowHTML() {\n    const template = $(`template#${this.namespacedId}-placeholderPeriodData`).first().html();\n    return template.replace(/___NEWINDEX___/g, this.currentRowsAmount);\n  },\n\n  updateAddPeriodButton() {\n    const btn = this.addPeriodButton;\n    btn.remove();\n    this.container.append(btn);\n\n    this.addPeriodButton = btn;\n    this.addPeriodButton.on('click', (e: MouseEvent) => {\n      e.preventDefault();\n      this.addRow();\n    });\n  },\n});\n\n// HACK: For some godawful reason, I cannot get this AssetBundle JS to execute\n//   *before* the one added with View#registerJs in OpeningHoursField.php:L357.\n//   So let's do some dirty event-based code execution. :)\ndocument.dispatchEvent(new CustomEvent('opening-hours-init'));\n\nif (import.meta.hot) {\n  import.meta.hot.accept();\n}\n"],"names":["namespacedId","id","settings","e","html","period","btn"],"mappings":"AAEI,MAAM,cAAgB,OAAM,MAAM,aAAe,IAErD,MAAM,aAAa,MAAQ,QAAQ,KAAK,OAAO,CAC7C,UAAW,KACX,aAAc,KACd,SAAU,KACV,kBAAmB,KACnB,gBAAiB,KAEjB,KAAKA,EAAcC,EAAIC,EAAU,CAC/B,KAAK,UAAY,EAAE,wBAAwB,EAAE,MAAM,EACnD,KAAK,aAAeF,EACf,KAAA,SAAW,KAAK,MAAME,CAAQ,EAE9B,KAAA,kBAAoB,KAAK,SAAS,QAAQ,OAE/C,KAAK,gBAAkB,EAAE,IAAIF,CAAY,qBAAqB,EAAE,QAChE,KAAK,gBAAgB,GAAG,QAAUG,GAAM,CACtCA,EAAE,eAAe,EACjB,KAAK,OAAO,CAAA,CACb,EAED,KAAK,UAAU,SAAU,sBAAuB,QAAUA,GAAM,CAC9DA,EAAE,eAAe,EACjB,KAAK,UAAUA,CAAC,CAAA,CACjB,CAOH,EAEA,QAAS,CACF,KAAA,oBAEC,MAAAC,EAAO,KAAK,gBACZC,EAAS,EAAED,CAAI,EAAE,SAAS,KAAK,SAAS,EAE9C,KAAK,QAAQ,aAAc,CACzB,OAAQC,CAAA,CACT,EAED,MAAM,eAAeA,CAAM,EAE3B,EAAE,uBAAwBA,CAAM,EAAE,WAAW,MAAM,iBAAiB,EACpE,EAAE,uBAAwBA,CAAM,EAAE,WAAW,MAAM,iBAAiB,EAEpE,KAAK,sBAAsB,CAC7B,EAEA,UAAUF,EAAG,CACX,EAAEA,EAAE,MAAM,EAAE,QAAQ,6BAA6B,EAAE,QACrD,EAEA,eAAgB,CAEd,OADiB,EAAE,YAAY,KAAK,YAAY,wBAAwB,EAAE,MAAM,EAAE,KAAK,EACvE,QAAQ,kBAAmB,KAAK,iBAAiB,CACnE,EAEA,uBAAwB,CACtB,MAAMG,EAAM,KAAK,gBACjBA,EAAI,OAAO,EACN,KAAA,UAAU,OAAOA,CAAG,EAEzB,KAAK,gBAAkBA,EACvB,KAAK,gBAAgB,GAAG,QAAU,GAAkB,CAClD,EAAE,eAAe,EACjB,KAAK,OAAO,CAAA,CACb,CACH,CACF,CAAC,EAKD,SAAS,cAAc,IAAI,YAAY,oBAAoB,CAAC"}